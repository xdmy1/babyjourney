const translations = {
    en: {
        nav: {
            features: "Features",
            pricing: "Pricing", 
            contact: "Contact Us",
            demo: "See Demo"
        },
        hero: {
            title: {
                part1: "Every moment matters. Capture your child's story —",
                part2: "from the first breath to the first dream."
            },
            subtitle: "A private digital home for every memory — safe, organized, and yours forever.",
            demo: "See Demo",
            order: "Order Now"
        },
        features: {
            title: "Features That Grow With Family",
            website: {
                title: "Personal Baby Website",
                description: "Your child's digital home — post photos anytime. Watch them grow in one beautiful timeline."
            },
            filters: {
                title: "Smart Filters Based Navigation", 
                description: "Smart Filters & Categories: #FirstSteps #SchoolDays — find memories instantly."
            },
            sharing: {
                title: "Private & Secure Sharing",
                description: "Private & secure. Photos only you and family see. No data tracking. No ads. Only love."
            },
            search: "Search Everything: Find special moments fast"
        },
        pricing: {
            title: "Choose Your Journey",
            subtitle: "Every family's story is unique. Find the perfect plan to capture and preserve your baby's precious moments.",
            plans: {
                basic: {
                    name: "Baby Steps",
                    description: "Perfect for new parents getting started",
                    features: [
                        "500 photos & videos",
                        "Basic timeline", 
                        "Mobile app access",
                        "Share with 5 family members"
                    ]
                },
                popular: {
                    name: "Growing Family",
                    description: "Everything you need for the journey",
                    badge: "Most Popular",
                    features: [
                        "Unlimited photos & videos",
                        "Smart milestone tracking",
                        "Advanced filters & search", 
                        "Share with unlimited family",
                        "Monthly photo books"
                    ]
                },
                premium: {
                    name: "Legacy Keeper",
                    description: "The complete memory preservation suite",
                    features: [
                        "Everything in Growing Family",
                        "AI-powered memory insights",
                        "Custom milestone templates",
                        "Premium photo books & prints",
                        "Priority support"
                    ]
                }
            },
            cta: "Get Started",
            guarantee: "30-day money-back guarantee • Cancel anytime • No setup fees"
        },
        problem: {
            title: "Your child's story is getting lost.",
            line1: "Photos are scattered across phones, chats, and clouds.",
            line2: "Memories fade. Accounts change. Privacy disappears.",
            heartbreak: "One day your child will ask: \"Where are my baby photos?\" — and most of them will be gone."
        },
        solution: {
            title: "Imagine a private timeline that grows with your child.",
            subtitle: "From their first smile to their first school day — every memory, safe and easy to find.",
            features: [
                "Private and encrypted timeline (no social media, no tracking)",
                "Upload photos, videos, and stories", 
                "Add multiple children and share with family",
                "Filter by milestones, categories, and hashtags",
                "Option to print a yearly photo book"
            ]
        },
        demo: {
            title: "See How It Works",
            cta: "DEMO"
        },
        about: {
            title: "We're parents, not a tech company.",
            description: "BabyJourney.life was born from our desire to protect our children's memories — not share them with algorithms."
        },
        faq: {
            title: "FAQ",
            readMore: "READ MORE",
            questions: [
                {
                    q: "Is my data really private?",
                    a: "Yes. Everything is encrypted. No one can access it except you and those you invite."
                },
                {
                    q: "Can I add multiple children?", 
                    a: "Absolutely. Each child has their own timeline."
                },
                {
                    q: "How is this different from social media?",
                    a: "No comments, no likes, no tracking — just your family story, safe forever."
                }
            ]
        },
        cta: {
            title: "BabyJourney.life — Every moment matters.",
            subtitle: "Private. Secure. Forever yours."
        },
        footer: {
            description: "Chronicle your baby's journey from first steps to first words. Every moment matters, every memory is precious.",
            sections: {
                product: "Product",
                support: "Support", 
                company: "Company"
            },
            links: {
                features: "Features",
                pricing: "Pricing",
                contact: "Contact Us",
                about: "About Us",
                privacy: "Privacy Policy",
                terms: "Terms of Service",
                cookies: "Cookies"
            },
            newsletter: {
                title: "Stay updated with baby milestones",
                subtitle: "Get weekly tips and features to capture every precious moment.",
                placeholder: "Enter your email",
                subscribe: "Subscribe"
            },
            copyright: "© 2025 BabyJourney.Life. All rights reserved.",
            madeWith: "Made with",
            forFamilies: "for families"
        }
    },
    ro: {
        nav: {
            features: "Funcții",
            pricing: "Prețuri",
            contact: "Contactează-ne", 
            demo: "Vezi Demo"
        },
        hero: {
            title: {
                part1: "Fiecare moment contează. Păstrează povestea copilului tău —",
                part2: "de la primul zâmbet până la primul vis."
            },
            subtitle: "Un spațiu digital privat pentru toate amintirile — sigur, organizat și doar al vostru.",
            demo: "Vezi Demo",
            order: "Comandă Acum"
        },
        features: {
            title: "Funcții Care Cresc Cu Familia",
            website: {
                title: "Site Personal Pentru Copil",
                description: "Casa digitală a copilului tău — posteaza fotografii oricând. Urmărește-l cum crește într-o cronologie frumoasă."
            },
            filters: {
                title: "Navigare Bazată Pe Filtre Inteligente", 
                description: "Filtre Inteligente & Categorii: #PrimiiPași #ZileleDeȘcoală — găsește amintiri instant."
            },
            sharing: {
                title: "Partajare Privată & Sigură",
                description: "Privat & sigur. Fotografii pe care doar tu și familia le vedeți. Fără urmărire date. Fără reclame. Doar dragoste."
            },
            search: "Caută Totul: Găsește momente speciale rapid"
        },
        pricing: {
            title: "Alege-ți Călătoria",
            subtitle: "Fiecare familie are o poveste unică. Găsește planul perfect pentru a capta și păstra momentele prețioase ale copilului tău.",
            plans: {
                basic: {
                    name: "Primii Pași",
                    description: "Perfect pentru părinții noi care încep",
                    features: [
                        "500 fotografii & videoclipuri",
                        "Cronologie de bază", 
                        "Acces aplicație mobilă",
                        "Partajare cu 5 membri ai familiei"
                    ]
                },
                popular: {
                    name: "Familia În Creștere",
                    description: "Tot ce aveți nevoie pentru călătorie",
                    badge: "Cel Mai Popular",
                    features: [
                        "Fotografii & videoclipuri nelimitate",
                        "Urmărirea inteligentă a etapelor",
                        "Filtre avansate & căutare", 
                        "Partajare cu familie nelimitată",
                        "Albume foto lunare"
                    ]
                },
                premium: {
                    name: "Păstrătorul Moștenirii",
                    description: "Suita completă pentru păstrarea amintirilor",
                    features: [
                        "Tot din Familia În Creștere",
                        "Perspective AI asupra amintirilor",
                        "Șabloane personalizate pentru etape",
                        "Albume foto & tipărituri premium",
                        "Suport prioritar"
                    ]
                }
            },
            cta: "Începe",
            guarantee: "Garanție 30 zile înapoi banii • Anulare oricând • Fără taxe de configurare"
        },
        problem: {
            title: "Povestea copilului tău se pierde.",
            line1: "Fotografiile sunt răspândite prin telefoane, chat-uri și cloud.",
            line2: "Amintirile se estompează. Confidențialitatea dispare.",
            heartbreak: "Într-o zi, copilul tău te va întreba: „Unde sunt pozele mele de când eram mic?" — și multe nu vor mai exista."
        },
        solution: {
            title: "Imaginează-ți o cronologie privată care crește odată cu copilul tău.",
            subtitle: "De la primul zâmbet până la prima zi de școală — fiecare amintire este păstrată în siguranță.",
            features: [
                "Cronologie privată și criptată (fără rețele sociale, fără urmărire)",
                "Încarcă poze, videoclipuri și amintiri",
                "Adaugă mai mulți copii și partajează cu familia", 
                "Filtrare după categorii, momente și hashtag-uri",
                "Opțional: album foto anual tipărit"
            ]
        },
        demo: {
            title: "Vezi cum funcționează",
            cta: "DEMO"
        },
        about: {
            title: "Suntem părinți, nu o companie tech.",
            description: "BabyJourney.life s-a născut din dorința de a proteja amintirile copiilor noștri — nu de a le împărtăși algoritmilor."
        },
        faq: {
            title: "FAQ",
            readMore: "CITEȘTE MAI MULT",
            questions: [
                {
                    q: "Datele mele sunt într-adevăr private?",
                    a: "Da. Totul este criptat. Doar tu și persoanele invitate aveți acces."
                },
                {
                    q: "Pot adăuga mai mulți copii?",
                    a: "Desigur. Fiecare copil are propria sa cronologie."
                },
                {
                    q: "Cum diferă de rețelele sociale?",
                    a: "Fără comentarii, fără like-uri, fără urmărire — doar povestea familiei tale, păstrată pentru totdeauna."
                }
            ]
        },
        cta: {
            title: "BabyJourney.life — Fiecare moment contează.",
            subtitle: "Privat. Sigur. Al vostru pentru totdeauna."
        },
        footer: {
            description: "Cronica călătoriei copilului tău de la primii pași la primele cuvinte. Fiecare moment contează, fiecare amintire este prețioasă.",
            sections: {
                product: "Produs",
                support: "Suport", 
                company: "Companie"
            },
            links: {
                features: "Funcții",
                pricing: "Prețuri",
                contact: "Contactează-ne",
                about: "Despre Noi",
                privacy: "Politica de Confidențialitate",
                terms: "Termenii Serviciului",
                cookies: "Cookie-uri"
            },
            newsletter: {
                title: "Rămâi la curent cu etapele copilului",
                subtitle: "Primește sfaturi săptămânale și funcții pentru a capta fiecare moment prețios.",
                placeholder: "Introdu emailul tău",
                subscribe: "Abonează-te"
            },
            copyright: "© 2025 BabyJourney.Life. Toate drepturile rezervate.",
            madeWith: "Făcut cu",
            forFamilies: "pentru familii"
        }
    },
    ru: {
        nav: {
            features: "Функции",
            pricing: "Цены",
            contact: "Связаться с нами",
            demo: "Посмотреть демо"
        },
        hero: {
            title: {
                part1: "Каждый момент важен. Сохрани историю своего ребёнка —",
                part2: "от первого вдоха до первой мечты."
            },
            subtitle: "Частное цифровое пространство для всех воспоминаний — безопасное, упорядоченное и только ваше.",
            demo: "Посмотреть демо",
            order: "Заказать сейчас"
        },
        features: {
            title: "Функции, Растущие С Семьей",
            website: {
                title: "Персональный Сайт Ребёнка",
                description: "Цифровой дом вашего ребёнка — публикуйте фото в любое время. Наблюдайте, как они растут в красивой хронологии."
            },
            filters: {
                title: "Навигация На Основе Умных Фильтров", 
                description: "Умные Фильтры & Категории: #ПервыеШаги #ШкольныеДни — находите воспоминания мгновенно."
            },
            sharing: {
                title: "Частный & Безопасный Обмен",
                description: "Частное & безопасное. Фотографии видите только вы и семья. Никакого отслеживания данных. Никакой рекламы. Только любовь."
            },
            search: "Поиск Всего: Быстро находите особые моменты"
        },
        pricing: {
            title: "Выберите Ваш Путь",
            subtitle: "История каждой семьи уникальна. Найдите идеальный план для захвата и сохранения драгоценных моментов вашего малыша.",
            plans: {
                basic: {
                    name: "Детские Шаги",
                    description: "Идеально для молодых родителей",
                    features: [
                        "500 фото и видео",
                        "Базовая хронология", 
                        "Доступ к мобильному приложению",
                        "Обмен с 5 членами семьи"
                    ]
                },
                popular: {
                    name: "Растущая Семья",
                    description: "Всё что нужно для путешествия",
                    badge: "Самый Популярный",
                    features: [
                        "Неограниченные фото и видео",
                        "Умное отслеживание этапов",
                        "Расширенные фильтры и поиск", 
                        "Обмен с неограниченной семьёй",
                        "Ежемесячные фотокниги"
                    ]
                },
                premium: {
                    name: "Хранитель Наследия",
                    description: "Полный набор для сохранения воспоминаний",
                    features: [
                        "Всё из Растущей Семьи",
                        "ИИ-анализ воспоминаний",
                        "Индивидуальные шаблоны этапов",
                        "Премиум фотокниги и печать",
                        "Приоритетная поддержка"
                    ]
                }
            },
            cta: "Начать",
            guarantee: "30-дневная гарантия возврата денег • Отмена в любое время • Без комиссий за настройку"
        },
        problem: {
            title: "История твоего ребёнка теряется.",
            line1: "Фотографии разбросаны по телефонам, чатам и облакам.",
            line2: "Воспоминания исчезают. Аккаунты меняются. Приватность пропадает.",
            heartbreak: "Однажды твой ребёнок спросит: «Где мои детские фотографии?» — и большинства из них уже не будет."
        },
        solution: {
            title: "Представь себе частную хронологию, которая растёт вместе с твоим ребёнком.",
            subtitle: "От первой улыбки до первого дня в школе — каждое воспоминание в безопасности и легко находится.",
            features: [
                "Частная и зашифрованная хронология (никаких соцсетей, никакого отслеживания)",
                "Загружай фото, видео и истории",
                "Добавляй нескольких детей и делись с семьёй",
                "Фильтруй по этапам, категориям и хэштегам",
                "Опционально: печать ежегодного фотоальбома"
            ]
        },
        demo: {
            title: "Посмотри, как это работает",
            cta: "ДЕМО"
        },
        about: {
            title: "Мы родители, а не технологическая компания.",
            description: "BabyJourney.life родился из нашего желания защитить воспоминания наших детей — не делиться ими с алгоритмами."
        },
        faq: {
            title: "FAQ",
            readMore: "ЧИТАТЬ БОЛЬШЕ",
            questions: [
                {
                    q: "Действительно ли мои данные приватны?",
                    a: "Да. Всё зашифровано. Только вы и приглашённые люди имеют доступ."
                },
                {
                    q: "Могу ли я добавить нескольких детей?",
                    a: "Конечно. У каждого ребёнка есть своя собственная хронология."
                },
                {
                    q: "Чем это отличается от социальных сетей?",
                    a: "Никаких комментариев, лайков, отслеживания — только история вашей семьи, сохранённая навсегда."
                }
            ]
        },
        cta: {
            title: "BabyJourney.life — Каждый момент важен.",
            subtitle: "Частно. Безопасно. Навсегда ваше."
        },
        footer: {
            description: "Ведите хронику путешествия вашего малыша от первых шагов до первых слов. Каждый момент важен, каждое воспоминание драгоценно.",
            sections: {
                product: "Продукт",
                support: "Поддержка", 
                company: "Компания"
            },
            links: {
                features: "Функции",
                pricing: "Цены",
                contact: "Связаться с нами",
                about: "О Нас",
                privacy: "Политика Конфиденциальности",
                terms: "Условия Использования",
                cookies: "Куки"
            },
            newsletter: {
                title: "Получайте обновления о детских этапах",
                subtitle: "Получайте еженедельные советы и функции для захвата каждого драгоценного момента.",
                placeholder: "Введите ваш email",
                subscribe: "Подписаться"
            },
            copyright: "© 2025 BabyJourney.Life. Все права защищены.",
            madeWith: "Сделано с",
            forFamilies: "для семей"
        }
    }
};

// Language switching functionality
console.log('translations.js loaded successfully');
let currentLanguage = 'en';

function setLanguage(lang) {
    console.log('Setting language to:', lang);
    currentLanguage = lang;
    updatePageContent();
    localStorage.setItem('selectedLanguage', lang);
    
    // Update both selectors
    const desktopSelector = document.getElementById('languageSelector');
    const mobileSelector = document.getElementById('languageSelectorMobile');
    
    if (desktopSelector) desktopSelector.value = lang;
    if (mobileSelector) mobileSelector.value = lang;
    console.log('Language set successfully to:', currentLanguage);
}

function updatePageContent() {
    console.log('Updating page content for language:', currentLanguage);
    const elements = document.querySelectorAll('[data-lang-key]');
    console.log('Found elements with data-lang-key:', elements.length);
    
    elements.forEach(element => {
        const key = element.getAttribute('data-lang-key');
        const keys = key.split('.');
        let value = translations[currentLanguage];
        
        for (let k of keys) {
            value = value ? value[k] : undefined;
        }
        
        if (value !== undefined) {
            // Handle arrays (for features lists)
            if (Array.isArray(value)) {
                const index = element.getAttribute('data-array-index');
                const prop = element.getAttribute('data-prop');
                if (index !== null && value[index]) {
                    // Handle FAQ questions with q and a properties
                    if (prop && value[index][prop]) {
                        element.textContent = value[index][prop];
                    } else {
                        element.textContent = value[index];
                    }
                }
            } else if (typeof value === 'string') {
                // Handle newlines in titles
                if (value.includes('\n')) {
                    element.innerHTML = value.replace(/\n/g, '<br>');
                } else {
                    element.textContent = value;
                }
            }
        }
    });

    // Handle placeholders
    const placeholderElements = document.querySelectorAll('[data-lang-key-placeholder]');
    placeholderElements.forEach(element => {
        const key = element.getAttribute('data-lang-key-placeholder');
        const keys = key.split('.');
        let value = translations[currentLanguage];
        
        for (let k of keys) {
            value = value ? value[k] : undefined;
        }
        
        if (value && element.tagName.toLowerCase() === 'input') {
            element.placeholder = value;
        }
    });
}

// Initialize language system
function initLanguageSystem() {
    console.log('Initializing language system...');
    
    // Load saved language or default to English
    const savedLanguage = localStorage.getItem('selectedLanguage') || 'en';
    console.log('Saved language:', savedLanguage);
    setLanguage(savedLanguage);
    
    // Add event listeners to language selectors
    const desktopSelector = document.getElementById('languageSelector');
    const mobileSelector = document.getElementById('languageSelectorMobile');
    
    console.log('Desktop selector found:', !!desktopSelector);
    console.log('Mobile selector found:', !!mobileSelector);
    
    if (desktopSelector) {
        desktopSelector.addEventListener('change', (e) => {
            console.log('Desktop selector changed to:', e.target.value);
            setLanguage(e.target.value);
        });
    }
    
    if (mobileSelector) {
        mobileSelector.addEventListener('change', (e) => {
            console.log('Mobile selector changed to:', e.target.value);
            setLanguage(e.target.value);
        });
    }
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    console.log('DOM loaded, initializing language system...');
    initLanguageSystem();
});

// Fallback: Also try to initialize after a short delay
setTimeout(function() {
    console.log('Fallback initialization after 1 second...');
    const desktopSelector = document.getElementById('languageSelector');
    const mobileSelector = document.getElementById('languageSelectorMobile');
    
    console.log('Fallback - Desktop selector found:', !!desktopSelector);
    console.log('Fallback - Mobile selector found:', !!mobileSelector);
    
    if (desktopSelector && !desktopSelector.hasAttribute('data-listener-added')) {
        console.log('Adding fallback event listener to desktop selector');
        desktopSelector.addEventListener('change', (e) => {
            console.log('Fallback desktop selector changed to:', e.target.value);
            setLanguage(e.target.value);
        });
        desktopSelector.setAttribute('data-listener-added', 'true');
    }
    
    if (mobileSelector && !mobileSelector.hasAttribute('data-listener-added')) {
        console.log('Adding fallback event listener to mobile selector');
        mobileSelector.addEventListener('change', (e) => {
            console.log('Fallback mobile selector changed to:', e.target.value);
            setLanguage(e.target.value);
        });
        mobileSelector.setAttribute('data-listener-added', 'true');
    }
}, 1000);